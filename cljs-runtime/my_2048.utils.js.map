{"version":3,"sources":["my_2048/utils.cljs"],"mappings":"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","names":["my-2048.utils/arrow-direction","my-2048.utils/tile-color","my-2048.utils/font-color","my-2048.utils/draw-square","point","ctx","tile-size","vec__20796","cljs.core.nth","m","n","my-2048.utils/get-vertexes","tile-side","grid-side-size","tile-gap","p1__20799#","p2__20800#","vertex-distance","vertex-xy","iter__5523__auto__","s__20802","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__20804","cljs.core/chunk-buffer","i__20803","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__20801","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","vertex-num","cljs.core.range","position2vec","cljs.core.reduce","cljs.core/conj","cljs.core/vec","vertexes","s__20806","b__20808","i__20807","iter__20805","x","s__20815","b__20817","i__20816","iter__20814","s__20822","b__20824","i__20823","iter__20821","y","my-2048.utils/get-ctx","canvas","my-2048.utils/set-color","color","my-2048.utils/set-font","font","my-2048.utils/get-font-size","value","my-2048.utils/get-delta-x","my-2048.utils/draw-field","game-field","seq__20831","chunk__20832","count__20833","i__20834","vec__20842","c__5568__auto__","cljs.core/chunk-first","vec__20847","cljs.core/next","cell-value","seq__20850","chunk__20851","count__20852","i__20853","vec__20868","vec__20879","vec__20871","vec__20882","text","font-size","delta-x","delta-y","G__20875","G__20885","my-2048.utils/clear-canvas","w","h"],"sourcesContent":["(ns my-2048.utils)\n\n(def arrow-direction {\n      \"ArrowDown\" :down\n      \"ArrowUp\" :up\n      \"ArrowLeft\" :left\n      \"ArrowRight\" :right})\n\n(def tile-color {\n  0 \"#776e65\",\n  2 \"#eee4da\",\n  4 \"#ede0c8\",\n  8 \"#f2b179\",\n  16 \"#f59563\",\n  32 \"#f67c5f\",\n  64 \"#f65e3b\",\n  128 \"#edcf72\",\n  256 \"#edcc61\",\n  512 \"#edcc61\",\n  1024 \"#edc53f\",\n  2048 \"#edc22e\"})\n\n(def font-color {\n  true \"#776e65\"\n  false \"#f9f6f2\"})\n\n(defn draw-square [point ctx tile-size]\n  (let [[m n] point]\n    (.fillRect ctx m n tile-size tile-size)))\n    \n(defn get-vertexes [tile-side grid-side-size tile-gap]\n  (let [vertex-distance (+ tile-side tile-gap)\n        vertex-xy (for [vertex-num (range grid-side-size)] \n                    (* vertex-distance vertex-num))\n        position2vec #(reduce conj (vec %1) (vec %2))\n        vertexes (for [x vertex-xy] \n                    (for [y vertex-xy] [y x]))]\n    (reduce position2vec [] vertexes)))\n\n(defn get-ctx [canvas]\n  (.getContext canvas \"2d\"))\n\n(defn set-color [ctx color]\n  (set! (.-fillStyle ctx) color))\n\n(defn set-font [ctx font]\n  (set! (.-font ctx) font))\n\n(defn get-font-size [value]\n  (str \n    (cond \n      (< value 16) 45\n      (< value 128) 40\n      (< value 1024) 33\n      :else 27)))\n\n(defn get-delta-x [value]\n  (cond \n    (< value 16) 24\n    (< value 128) 16\n    (< value 1024) 9\n    :else 6))\n\n(defn draw-field [ctx tile-size game-field ]\n  (doseq [[point cell-value] game-field] \n    (set-color ctx (tile-color cell-value))\n    (draw-square point ctx tile-size))\n  (doseq [[point cell-value] game-field] \n    (if (> cell-value 0)\n      (let [text (str cell-value)\n          [x y] point\n          font-size (get-font-size cell-value)\n          font (str font-size \"px serif\")\n          delta-x (get-delta-x cell-value)\n          delta-y 55]\n        (set-color ctx (font-color (< cell-value 8)))\n        (set-font ctx font)\n        (.fillText ctx text (+ x delta-x) (+ y delta-y))))))\n      \n(defn clear-canvas [canvas]\n  (let [ctx (get-ctx canvas)\n        w (.-width canvas)\n        h (.-height canvas)]\n    (.clearRect ctx 0 0 w h)))\n"]}